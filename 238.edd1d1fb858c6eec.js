"use strict";(self.webpackChunksejMe=self.webpackChunksejMe||[]).push([[238],{7238:(st,w,o)=>{o.r(w),o.d(w,{MemberModule:()=>tt});var p=o(1290),e=o(5879),l=o(4221);const m=t=>t.membersFilters,y=(0,l.P1)(m,t=>({searchValue:t.searchValue,selectedBirthLocations:t.selectedBirthLocations,selectedClubs:t.selectedClubs,selectedDistrictsNames:t.selectedDistrictsNames,selectedEducationLevels:t.selectedEducationLevels,selectedProfessions:t.selectedProfessions,selectedVoivodeships:t.selectedVoivodeships})),Z=(0,l.P1)(m,t=>t.selectedTerm),H=(0,l.P1)(m,t=>t.selectedTerm?.num||null),j=(0,l.P1)(m,t=>t.searchValue),K=(0,l.P1)(m,t=>t.selectedBirthLocations),R=(0,l.P1)(m,t=>Array.from(t.availableBirthLocations)),O=(0,l.P1)(m,t=>Array.from(t.availableClubs)),W=(0,l.P1)(m,t=>Array.from(t.availableDistrictsNames)),Q=(0,l.P1)(m,t=>Array.from(t.availableEducationLevels)),G=(0,l.P1)(m,t=>Array.from(t.availableProfessions)),Y=(0,l.P1)(m,t=>Array.from(t.availableVoivodeships)),X=(0,l.P1)(m,t=>t.selectedClubs),ee=(0,l.P1)(m,t=>t.selectedDistrictsNames),te=(0,l.P1)(m,t=>t.selectedEducationLevels),se=(0,l.P1)(m,t=>t.selectedProfessions),ie=(0,l.P1)(m,t=>t.selectedVoivodeships);var re=o(1993);let le=(()=>{class t{constructor(){this.router=(0,e.f3M)(p.F0),this.store=(0,e.f3M)(l.yh),this.activeRoute=(0,e.f3M)(p.gz),this.destroyRef=(0,e.f3M)(e.ktI)}ngOnInit(){this.store.select(Z).pipe((0,re.sL)(this.destroyRef)).subscribe(s=>{s&&this.router.navigate([],{relativeTo:this.activeRoute,queryParams:{term:s.num},queryParamsHandling:"merge"})})}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["sm-member-page"]],decls:1,vars:0,template:function(i,n){1&i&&e._UZ(0,"router-outlet")},dependencies:[p.lC],encapsulation:2})}return t})();const b=t=>t.members,ne=((0,l.P1)(b,t=>t.allMembers),(0,l.P1)(b,t=>Array.from(t.allMembers.values())),(0,l.P1)(b,t=>[...t.filteredMembers]));(0,l.P1)(b,t=>t.status),(0,l.P1)(b,t=>t.error);var f=o(6814),oe=o(9862),ce=o(2309);let N=(()=>{class t{constructor(){this.apiPath="MP",this.http=(0,e.f3M)(oe.eN),this.httpUtils=(0,e.f3M)(ce.O)}fetchList(s){return this.http.get(this.httpUtils.buildApiUrl(s,this.apiPath))}fetchById(s,i){return this.http.get(this.httpUtils.buildApiUrl(s,`${this.apiPath}/${i}`))}buildPhotoUrl(s,i){return this.httpUtils.buildApiUrl(s,`${this.apiPath}/${i}/photo`)}buildMiniPhotoUrl(s,i){return this.httpUtils.buildApiUrl(s,`${this.apiPath}/${i}/photo-mini`)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var ae=o(7229);const me=["sm-member-row",""];function ue(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"div",4)(1,"div",5)(2,"img",6),e.NdJ("error",function(){e.CHM(s);const n=e.oxw();return e.KtG(n.onImageLoadError())}),e.qZA()()()}if(2&t){const s=e.oxw();e.xp6(2),e.s9C("ngSrc",s.miniPhotoUrl)}}function de(t,r){if(1&t&&(e.ynx(0),e._uU(1),e.BQk()),2&t){const s=e.oxw();e.xp6(1),e.hij(" ",s.member.inactiveCause," ")}}function he(t,r){1&t&&e._UZ(0,"span",7)}let pe=(()=>{class t{constructor(){this.memberApi=(0,e.f3M)(N),this.miniPhotoUrl="",this.showFallbackIcon=!1}ngOnChanges(s){s.member?.currentValue&&this.termNum&&(this.miniPhotoUrl=this.memberApi.buildMiniPhotoUrl(this.termNum,this.member.id))}onImageLoadError(){this.showFallbackIcon=!0}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["tr","sm-member-row",""]],inputs:{member:"member",termNum:"termNum"},features:[e.TTD],attrs:me,decls:30,vars:19,consts:[[1,"flex","items-center","space-x-3"],["class","avatar",4,"ngIf","ngIfElse"],[4,"ngIf"],["userIcon",""],[1,"avatar"],[1,"mask","mask-squircle","w-12","h-12"],["fill","","alt","Avatar pos\u0142a",3,"ngSrc","error"],["smIcon","user",1,"w-12","h-12","flex","items-center","justify-center"]],template:function(i,n){if(1&i&&(e.TgZ(0,"td")(1,"div",0),e.YNc(2,ue,3,1,"div",1),e.qZA()(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td")(8,"span"),e._uU(9),e.qZA(),e._UZ(10,"br"),e.YNc(11,de,2,1,"ng-container",2),e.qZA(),e.TgZ(12,"td"),e._uU(13),e.qZA(),e.TgZ(14,"td"),e._uU(15),e._UZ(16,"br"),e._uU(17),e.qZA(),e.TgZ(18,"td"),e._uU(19),e.qZA(),e.TgZ(20,"td"),e._uU(21),e.qZA(),e.TgZ(22,"td"),e._uU(23),e.qZA(),e.TgZ(24,"td"),e._uU(25),e.qZA(),e.TgZ(26,"td"),e._uU(27),e.qZA(),e.YNc(28,he,1,0,"ng-template",null,3,e.W1O)),2&i){const c=e.MAs(29);e.xp6(2),e.Q6J("ngIf",!n.showFallbackIcon)("ngIfElse",c),e.xp6(2),e.AsE("",n.member.firstName," ",n.member.secondName,""),e.xp6(2),e.Oqu(n.member.lastName),e.xp6(2),e.Gre("badge badge-sm ",n.member.active?"badge-success":"badge-error",""),e.xp6(1),e.Oqu(n.member.active?"Aktywny":"Nieaktywny"),e.xp6(2),e.Q6J("ngIf",!n.member.active),e.xp6(2),e.Oqu(n.member.email),e.xp6(2),e.hij(" ",n.member.birthDate," "),e.xp6(2),e.hij(" ",n.member.birthLocation,"\n"),e.xp6(2),e.Oqu(n.member.club),e.xp6(2),e.AsE("",n.member.districtName," (",n.member.voivodeship,")"),e.xp6(2),e.Oqu(n.member.numberOfVotes),e.xp6(2),e.Oqu(n.member.profession),e.xp6(2),e.Oqu(n.member.educationLevel)}},dependencies:[f.O5,ae.r,f.Zd],changeDetection:0})}return t})();function be(t,r){if(1&t&&(e._UZ(0,"tr",2),e.ALo(1,"async")),2&t){const s=r.$implicit,i=e.oxw();e.Q6J("member",s)("termNum",e.lcZ(1,2,i.selectedTermNum$))}}const fe=function(){return[]};let ge=(()=>{class t{constructor(){this.store=(0,e.f3M)(l.yh),this.members$=this.store.select(ne),this.selectedTermNum$=this.store.select(H)}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["sm-members-table"]],decls:27,vars:4,consts:[[1,"table","table-xs","table-pin-rows","relative","max-h-full","w-full"],["sm-member-row","",3,"member","termNum",4,"ngFor","ngForOf"],["sm-member-row","",3,"member","termNum"]],template:function(i,n){1&i&&(e.TgZ(0,"table",0)(1,"thead")(2,"tr"),e._UZ(3,"th"),e.TgZ(4,"th"),e._uU(5,"Imie"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Nazwisko"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Status"),e.qZA(),e.TgZ(10,"th"),e._uU(11,"Email"),e.qZA(),e.TgZ(12,"th"),e._uU(13,"Data imiejsce narodzin"),e.qZA(),e.TgZ(14,"th"),e._uU(15,"Klub"),e.qZA(),e.TgZ(16,"th"),e._uU(17,"Region"),e.qZA(),e.TgZ(18,"th"),e._uU(19,"Otrzymanych g\u0142os\xf3w"),e.qZA(),e.TgZ(20,"th"),e._uU(21,"Zaw\xf3d"),e.qZA(),e.TgZ(22,"th"),e._uU(23,"Wykszta\u0142cenie"),e.qZA()()(),e.TgZ(24,"tbody"),e.YNc(25,be,2,4,"tr",1),e.ALo(26,"async"),e.qZA()()),2&i&&(e.xp6(25),e.Q6J("ngForOf",e.lcZ(26,1,n.members$)||e.DdM(3,fe)))},dependencies:[f.sg,pe,f.Ov],changeDetection:0})}return t})();const F=(0,l.PH)("[MembersFilters] Initialize members filters",(0,l.Ky)()),P=(0,l.PH)("[MembersFilters] Initialize selected term",(0,l.Ky)()),A=(0,l.PH)("[MembersFilters] Update selected term",(0,l.Ky)()),x=(0,l.PH)("[MembersFilters] Update search value",(0,l.Ky)()),U=(0,l.PH)("[MembersFilters] Update selected birth locations",(0,l.Ky)()),S=(0,l.PH)("[MembersFilters] Update selected clubs",(0,l.Ky)()),E=(0,l.PH)("[MembersFilters] Update selected districts names",(0,l.Ky)()),I=(0,l.PH)("[MembersFilters] Update selected education levels",(0,l.Ky)()),$=(0,l.PH)("[MembersFilters] Update selected professions",(0,l.Ky)()),V=(0,l.PH)("[MembersFilters] Update selected voivodeships",(0,l.Ky)()),q=(0,l.PH)("[MembersFilters] Save members filters"),T=(0,l.PH)("[MembersFilters] Clear members filters");var Me=o(9026),z=o(9788),ve=o(3751),_e=o(1444),v=o(95);function Le(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"sm-item-multi-select",17),e.NdJ("ngModelChange",function(n){e.CHM(s);const c=e.oxw(2);return e.KtG(c.updateSelectedBirthLocations(n))}),e.ALo(1,"async"),e.qZA()}if(2&t){const s=r.ngIf,i=e.oxw(2);e.Q6J("items",s)("ngModel",e.lcZ(1,2,i.selectedBirthLocations$))}}function Ce(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"sm-item-multi-select",18),e.NdJ("ngModelChange",function(n){e.CHM(s);const c=e.oxw(2);return e.KtG(c.updateSelectedClubs(n))}),e.ALo(1,"async"),e.qZA()}if(2&t){const s=r.ngIf,i=e.oxw(2);e.Q6J("items",s)("ngModel",e.lcZ(1,2,i.selectedClubs$))}}function ye(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"sm-item-multi-select",19),e.NdJ("ngModelChange",function(n){e.CHM(s);const c=e.oxw(2);return e.KtG(c.updateSelectedDistrictsNames(n))}),e.ALo(1,"async"),e.qZA()}if(2&t){const s=r.ngIf,i=e.oxw(2);e.Q6J("items",s)("ngModel",e.lcZ(1,2,i.selectedDistrictsNames$))}}function Ze(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"sm-item-multi-select",20),e.NdJ("ngModelChange",function(n){e.CHM(s);const c=e.oxw(2);return e.KtG(c.updateSelectedEducationLevels(n))}),e.ALo(1,"async"),e.qZA()}if(2&t){const s=r.ngIf,i=e.oxw(2);e.Q6J("items",s)("ngModel",e.lcZ(1,2,i.selectedEducationLevels$))}}function Fe(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"sm-item-multi-select",21),e.NdJ("ngModelChange",function(n){e.CHM(s);const c=e.oxw(2);return e.KtG(c.updateSelectedProfessions(n))}),e.ALo(1,"async"),e.qZA()}if(2&t){const s=r.ngIf,i=e.oxw(2);e.Q6J("items",s)("ngModel",e.lcZ(1,2,i.selectedProfessions$))}}function Pe(t,r){if(1&t){const s=e.EpF();e.TgZ(0,"sm-item-multi-select",22),e.NdJ("ngModelChange",function(n){e.CHM(s);const c=e.oxw(2);return e.KtG(c.updateselectedVoivodeships(n))}),e.ALo(1,"async"),e.qZA()}if(2&t){const s=r.ngIf,i=e.oxw(2);e.Q6J("items",s)("ngModel",e.lcZ(1,2,i.selectedVoivodeships$))}}function Ae(t,r){if(1&t&&(e.TgZ(0,"div")(1,"div",10),e.YNc(2,Le,2,4,"sm-item-multi-select",11),e.ALo(3,"async"),e.YNc(4,Ce,2,4,"sm-item-multi-select",12),e.ALo(5,"async"),e.YNc(6,ye,2,4,"sm-item-multi-select",13),e.ALo(7,"async"),e.YNc(8,Ze,2,4,"sm-item-multi-select",14),e.ALo(9,"async"),e.YNc(10,Fe,2,4,"sm-item-multi-select",15),e.ALo(11,"async"),e.YNc(12,Pe,2,4,"sm-item-multi-select",16),e.ALo(13,"async"),e.qZA()()),2&t){const s=e.oxw();e.xp6(2),e.Q6J("ngIf",e.lcZ(3,6,s.availableBirthLocations$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(5,8,s.availableClubs$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(7,10,s.availableDistricts$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(9,12,s.availableEductionLevels$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(11,14,s.availableProfessions$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(13,16,s.availableVoivodeships$))}}const Te=function(){return[]};let we=(()=>{class t{constructor(){this.store=(0,e.f3M)(l.yh),this.terms$=this.store.select(z.PB),this.selectedTerm$=this.store.select(Z),this.compareTerms=Me.H,this.availableBirthLocations$=this.store.select(R),this.availableClubs$=this.store.select(O),this.availableDistricts$=this.store.select(W),this.availableEductionLevels$=this.store.select(Q),this.availableProfessions$=this.store.select(G),this.availableVoivodeships$=this.store.select(Y),this.searchValue$=this.store.select(j),this.selectedBirthLocations$=this.store.select(K),this.selectedClubs$=this.store.select(X),this.selectedDistrictsNames$=this.store.select(ee),this.selectedEducationLevels$=this.store.select(te),this.selectedProfessions$=this.store.select(se),this.selectedVoivodeships$=this.store.select(ie),this.shoWAdditionalFilters=!1}onTermSelect(s){this.store.dispatch(A({term:s}))}updateMembersSearchValue(s){this.store.dispatch(x({searchValue:s}))}updateSelectedBirthLocations(s){this.store.dispatch(U({birthLocations:s}))}updateSelectedClubs(s){this.store.dispatch(S({clubs:s}))}updateSelectedDistrictsNames(s){this.store.dispatch(E({districts:s}))}updateSelectedEducationLevels(s){this.store.dispatch(I({levels:s}))}updateSelectedProfessions(s){this.store.dispatch($({professions:s}))}updateselectedVoivodeships(s){this.store.dispatch(V({voivodeships:s}))}saveFilters(){this.store.dispatch(q())}clearFilters(){this.store.dispatch(T())}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["sm-members-filters"]],decls:17,vars:15,consts:[[1,"flex","gap-3"],["label","Wybierz kadencje sejmu","labelProperty","label",3,"items","ngModel","compareWithFn","ngModelChange"],[1,"form-control","max-w-xs"],["for","member-search",1,"label-text","label"],["id","member-search","type","text","placeholder","Imi\u0119 lub naziwsko",1,"input","input-bordered","w-full","max-w-xs",3,"ngModel","ngModelChange"],[1,"font-medium","self-end","h-12",3,"click"],[4,"ngIf"],[1,"flex","items-end","flex-1","gap-1"],[1,"btn","btn-neutral",3,"click"],[1,"btn",3,"click"],[1,"flex","gap-3","flex-wrap"],["label","Miejsce narodzin","classes","min-w-[8rem]",3,"items","ngModel","ngModelChange",4,"ngIf"],["label","Klub","classes","min-w-[8rem]",3,"items","ngModel","ngModelChange",4,"ngIf"],["label","Region","classes","min-w-[8rem]",3,"items","ngModel","ngModelChange",4,"ngIf"],["label","Wykszta\u0142cenie","classes","min-w-[8rem]",3,"items","ngModel","ngModelChange",4,"ngIf"],["label","Zaw\xf3d","classes","min-w-[8rem]",3,"items","ngModel","ngModelChange",4,"ngIf"],["label","Wojew\xf3dztwo","classes","min-w-[8rem]",3,"items","ngModel","ngModelChange",4,"ngIf"],["label","Miejsce narodzin","classes","min-w-[8rem]",3,"items","ngModel","ngModelChange"],["label","Klub","classes","min-w-[8rem]",3,"items","ngModel","ngModelChange"],["label","Region","classes","min-w-[8rem]",3,"items","ngModel","ngModelChange"],["label","Wykszta\u0142cenie","classes","min-w-[8rem]",3,"items","ngModel","ngModelChange"],["label","Zaw\xf3d","classes","min-w-[8rem]",3,"items","ngModel","ngModelChange"],["label","Wojew\xf3dztwo","classes","min-w-[8rem]",3,"items","ngModel","ngModelChange"]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"sm-item-select",1),e.NdJ("ngModelChange",function(g){return n.onTermSelect(g)}),e.ALo(2,"async"),e.ALo(3,"async"),e.qZA(),e.TgZ(4,"div",2)(5,"label",3),e._uU(6," Imi\u0119 lub Nazwisko "),e.qZA(),e.TgZ(7,"input",4),e.NdJ("ngModelChange",function(g){return n.updateMembersSearchValue(g)}),e.ALo(8,"async"),e.qZA()(),e.TgZ(9,"button",5),e.NdJ("click",function(){return n.shoWAdditionalFilters=!n.shoWAdditionalFilters}),e._uU(10),e.qZA()(),e.YNc(11,Ae,14,18,"div",6),e.TgZ(12,"div",7)(13,"button",8),e.NdJ("click",function(){return n.saveFilters()}),e._uU(14,"Filtruj"),e.qZA(),e.TgZ(15,"button",9),e.NdJ("click",function(){return n.clearFilters()}),e._uU(16,"Usu\u0144 filtry"),e.qZA()()),2&i&&(e.xp6(1),e.Q6J("items",e.lcZ(2,8,n.terms$)||e.DdM(14,Te))("ngModel",e.lcZ(3,10,n.selectedTerm$))("compareWithFn",n.compareTerms),e.xp6(6),e.Q6J("ngModel",e.lcZ(8,12,n.searchValue$)),e.xp6(3),e.hij(" ",n.shoWAdditionalFilters?"- Ukryj dodatkowe filtry":"+ Poka\u017c wi\u0119cej filtr\xf3w"," "),e.xp6(1),e.Q6J("ngIf",n.shoWAdditionalFilters),e.xp6(1),e.ekj("justify-end",n.shoWAdditionalFilters))},dependencies:[f.O5,ve.p,_e.c,v.Fj,v.JJ,v.On,f.Ov],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap;gap:1rem;width:100%}"],changeDetection:0})}return t})(),Ne=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],decls:4,vars:0,consts:[[1,"px-4","py-4"],[1,"my-4"],[1,"overflow-x-auto","block"]],template:function(i,n){1&i&&(e.TgZ(0,"main",0),e._UZ(1,"sm-members-filters")(2,"hr",1)(3,"sm-members-table",2),e.qZA())},dependencies:[ge,we],changeDetection:0})}return t})();(0,l.PH)("[Member] Load Member",(0,l.Ky)()),(0,l.PH)("[Member] Load Member Success",(0,l.Ky)()),(0,l.PH)("[Member] Load Member Error",(0,l.Ky)());const _=(0,l.PH)("[Member] Load Members List",(0,l.Ky)()),L=(0,l.PH)("[Member] Load Members List Success",(0,l.Ky)()),k=(0,l.PH)("[Member] Load Members List Error",(0,l.Ky)()),M=(0,l.PH)("[Member] Filter Members List",(0,l.Ky)());function D(t,r){let s=[...t];if(r&&D.length){if(r.searchValue){const i=r.searchValue.toLocaleLowerCase();s=s.filter(n=>n.firstName.toLocaleLowerCase().includes(i)||n.lastName.toLocaleLowerCase().includes(i))}r.selectedBirthLocations&&(s=s.filter(i=>r.selectedBirthLocations?.includes(i.birthLocation))),r.selectedClubs&&(s=s.filter(i=>r.selectedClubs?.includes(i.club))),r.selectedDistrictsNames&&(s=s.filter(i=>r.selectedDistrictsNames?.includes(i.districtName))),r.selectedEducationLevels&&(s=s.filter(i=>r.selectedEducationLevels?.includes(i.educationLevel))),r.selectedProfessions&&(s=s.filter(i=>r.selectedProfessions?.includes(i.profession))),r.selectedVoivodeships&&(s=s.filter(i=>r.selectedVoivodeships?.includes(i.voivodeship)))}return s}const qe=(0,l.Lq)({allMembers:new Map,filteredMembers:[],status:"pending",error:null},(0,l.on)(_,t=>({...t,status:"loading"})),(0,l.on)(L,(t,{members:r})=>{const s=new Map;return r.forEach(i=>s.set(i.id,i)),{...t,allMembers:s,filteredMembers:r,error:null,status:"success"}}),(0,l.on)(k,(t,{error:r})=>({...t,error:r,status:"error"})),(0,l.on)(M,(t,{filters:r})=>{const s=D(Array.from(t.allMembers.values()),r);return{...t,filteredMembers:s}}));function ze(t,r){return qe(t,r)}const Je=(0,l.Lq)({availableClubs:new Set,availableDistrictsNames:new Set,availableBirthLocations:new Set,availableProfessions:new Set,availableEducationLevels:new Set,availableVoivodeships:["dolno\u015bl\u0105skie","kujawsko-pomorskie","lubelskie","lubuskie","\u0142\xf3dzkie","ma\u0142opolskie","mazowieckie","opolskie","podkarpackie","podlaskie","pomorskie","\u015bl\u0105skie","\u015bwi\u0119tokrzyskie","warmi\u0144sko-mazurskie","wielkopolskie","zachodniopomorskie"],selectedTerm:null,searchValue:null,selectedClubs:null,selectedDistrictsNames:null,selectedBirthLocations:null,selectedProfessions:null,selectedEducationLevels:null,selectedVoivodeships:null},(0,l.on)(L,(t,{members:r})=>{const s=function xe(t){return new Set(t.map(r=>r.club))}(r),i=function Ue(t){return new Set(t.map(r=>r.districtName))}(r),n=function Se(t){return new Set(t.map(r=>r.birthLocation))}(r),c=function Ee(t){return new Set(t.map(r=>r.profession))}(r),g=function Ie(t){return new Set(t.map(r=>r.educationLevel))}(r);return{...t,availableClubs:s,availableDistrictsNames:i,availableBirthLocations:n,availableProfessions:c,availableEducationLevels:g,selectedBirthLocations:t.selectedBirthLocations?.filter(u=>n.has(u))||null,selectedClubs:t.selectedClubs?.filter(u=>s.has(u))||null,selectedDistrictsNames:t.selectedDistrictsNames?.filter(u=>i.has(u))||null,selectedEducationLevels:t.selectedEducationLevels?.filter(u=>g.has(u))||null,selectedProfessions:t.selectedProfessions?.filter(u=>c.has(u))||null}}),(0,l.on)(F,(t,r)=>({...t,...r})),(0,l.on)(P,(t,{term:r})=>({...t,selectedTerm:r})),(0,l.on)(A,(t,{term:r})=>({...t,selectedTerm:r})),(0,l.on)(x,(t,{searchValue:r})=>({...t,searchValue:r})),(0,l.on)(U,(t,{birthLocations:r})=>({...t,selectedBirthLocations:r})),(0,l.on)(S,(t,{clubs:r})=>({...t,selectedClubs:r})),(0,l.on)(E,(t,{districts:r})=>({...t,selectedDistrictsNames:r})),(0,l.on)(I,(t,{levels:r})=>({...t,selectedEducationLevels:r})),(0,l.on)($,(t,{professions:r})=>({...t,selectedProfessions:r})),(0,l.on)(V,(t,{voivodeships:r})=>({...t,selectedVoivodeships:r})),(0,l.on)(T,t=>({...t,searchValue:null,selectedBirthLocations:null,selectedClubs:null,selectedDistrictsNames:null,selectedEducationLevels:null,selectedProfessions:null,selectedVoivodeships:null})));function He(t,r){return Je(t,r)}var a=o(8131),d=o(7634),B=o(7398),je=o(6306),h=o(2096);let Ke=(()=>{class t{constructor(){this.actions=(0,e.f3M)(a.eX),this.apiService=(0,e.f3M)(N),this.loadMembersList$=(0,a.GW)(()=>this.actions.pipe((0,a.l4)(_),(0,d.z)(({termNum:s})=>this.apiService.fetchList(s).pipe((0,B.U)(i=>L({members:i})),(0,je.K)(i=>(0,h.of)(k({error:i})))))))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})();var Re=o(6208),We=o(1374),C=o(2460),Qe=o(6503),J=o(6232);function Ye(t){return{birth:t.selectedBirthLocations?.join(",")||void 0,club:t.selectedClubs?.join(",")||void 0,district:t.selectedDistrictsNames?.join(",")||void 0,education:t.selectedEducationLevels?.join(",")||void 0,profession:t.selectedProfessions?.join(",")||void 0,search:t.searchValue||void 0,voivodeship:t.selectedVoivodeships?.join(",")||void 0}}let Xe=(()=>{class t{constructor(){this.store=(0,e.f3M)(l.yh),this.actions=(0,e.f3M)(a.eX),this.router=(0,e.f3M)(p.F0),this.activatedRoute=(0,e.f3M)(p.gz),this.filtersInitialize$=(0,a.GW)(()=>this.actions.pipe((0,a.l4)(F),(0,d.z)(s=>(0,h.of)(M({filters:s}))))),this.selectedTermInitialize$=(0,a.GW)(()=>this.actions.pipe((0,a.l4)(P),(0,d.z)(({term:s})=>s?(0,h.of)(_({termNum:s.num})):J.E))),this.filterMembersOnLoadSuccess$=(0,a.GW)(()=>this.actions.pipe((0,a.l4)(L),(0,C.M)(this.store.select(y)),(0,d.z)(([s,i])=>(0,h.of)(M({filters:i}))))),this.termFilterUpdate$=(0,a.GW)(()=>this.actions.pipe((0,a.l4)(A),(0,d.z)(({term:s})=>s?(this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{term:s.num},queryParamsHandling:"merge"}),(0,h.of)(_({termNum:s.num}))):J.E))),this.filtersSaved$=(0,a.GW)(()=>this.actions.pipe((0,a.l4)(q),(0,C.M)(this.store.select(y)),(0,d.z)(([s,i])=>(this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{...Ye(i)},queryParamsHandling:"merge"}),(0,h.of)(M({filters:i})))))),this.filtersCleared$=(0,a.GW)(()=>this.actions.pipe((0,a.l4)(T),(0,C.M)(this.store.select(Z)),(0,d.z)(([s,i])=>(this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:i?{term:i.num}:{}}),(0,h.of)(M({}))))))}static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac})}return t})();const et=[{path:"",component:le,resolve:{membersFilters:t=>{const r=(0,e.f3M)(l.yh),s=function Oe(t){return{searchValue:t.search,selectedBirthLocations:t.birth?.split(","),selectedClubs:t.club?.split(","),selectedDistrictsNames:t.district?.split(","),selectedEducationLevels:t.education?.split(","),selectedProfessions:t.profession?.split(","),selectedVoivodeships:t.voivodeship?.split(",")}}(t.queryParams);return r.select(z.PB).pipe((0,We.P)(),(0,C.M)(r.select(y)),(0,B.U)(([i])=>(r.dispatch(F(s)),r.dispatch(P({term:(0,Qe.w)(i,t.queryParams)})),s)))}},children:[{path:"",component:Ne}]}];let tt=(()=>{class t{static#e=this.\u0275fac=function(i){return new(i||t)};static#t=this.\u0275mod=e.oAB({type:t});static#s=this.\u0275inj=e.cJS({imports:[Re.m,v.u5,p.Bz.forChild(et),l.Aw.forFeature("members",ze),l.Aw.forFeature("membersFilters",He),a.sQ.forFeature([Ke,Xe])]})}return t})()}}]);