"use strict";(self.webpackChunksejMe=self.webpackChunksejMe||[]).push([[475],{8475:(ct,b,o)=>{o.r(b),o.d(b,{ClubModule:()=>ot});var u=o(6814),a=o(1290),t=o(5879),n=o(4221);const h=(0,n.PH)("[Club] Load Clubs",(0,n.Ky)()),C=(0,n.PH)("[Club] Load Clubs Success",(0,n.Ky)()),v=(0,n.PH)("[Club] Load Clubs Failure",(0,n.Ky)()),p=(0,n.PH)("[Club] Update clubs selected term",(0,n.Ky)()),f=(0,n.PH)("[Club] Initialize clubs selected term",(0,n.Ky)()),T="clubs",I=(0,n.Lq)({allClubs:new Map,status:"pending",error:null,selectedTerm:null},(0,n.on)(h,e=>({...e,status:"loading"})),(0,n.on)(C,(e,{clubs:c})=>({...e,status:"success",allClubs:new Map(c.map(s=>[s.id,s]))})),(0,n.on)(v,(e,{error:c})=>({...e,status:"error",error:c})),(0,n.on)(p,(e,{term:c})=>({...e,selectedTerm:c})),(0,n.on)(f,(e,{term:c})=>({...e,selectedTerm:c}))),m=(0,n.ZF)(T),L=(0,n.P1)(m,e=>Array.from(e.allClubs.values())),y=((0,n.P1)(m,e=>e.status),(0,n.P1)(m,e=>e.error),(0,n.P1)(m,e=>e.selectedTerm)),N=(0,n.P1)(m,e=>e.selectedTerm?.num||null);var $=o(1993);let S=(()=>{class e{constructor(){this.router=(0,t.f3M)(a.F0),this.store=(0,t.f3M)(n.yh),this.activeRoute=(0,t.f3M)(a.gz),this.destroyRef=(0,t.f3M)(t.ktI)}ngOnInit(){this.store.select(y).pipe((0,$.sL)(this.destroyRef)).subscribe(s=>{s&&this.router.navigate([],{relativeTo:this.activeRoute,queryParams:{term:s.num},queryParamsHandling:"merge"})})}static#t=this.\u0275fac=function(l){return new(l||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["sm-club-page"]],decls:1,vars:0,template:function(l,r){1&l&&t._UZ(0,"router-outlet")},dependencies:[a.lC],encapsulation:2,changeDetection:0})}return e})();var z=o(9862),O=o(2309);let Z=(()=>{class e{constructor(){this.apiPath="clubs",this.http=(0,t.f3M)(z.eN),this.httpUtils=(0,t.f3M)(O.O)}fetchList(s){return this.http.get(this.httpUtils.buildApiUrl(s,this.apiPath))}fetchById(s,l){return this.http.get(this.httpUtils.buildApiUrl(s,`${this.apiPath}/${l}`))}buildLogoUrl(s,l){return this.httpUtils.buildApiUrl(s,`${this.apiPath}/${l}/logo`)}static#t=this.\u0275fac=function(l){return new(l||e)};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var E=o(7229);const J=["sm-club-item",""];function R(e,c){if(1&e){const s=t.EpF();t.TgZ(0,"img",6),t.NdJ("error",function(){t.CHM(s);const r=t.oxw(2);return t.KtG(r.onImageLoadError())}),t.qZA()}if(2&e){const s=t.oxw(2);t.Q6J("ngSrc",s.logoUrl)}}function D(e,c){if(1&e&&(t.TgZ(0,"div",3)(1,"div",4),t.YNc(2,R,1,1,"img",5),t.qZA()()),2&e){const s=t.oxw();t.xp6(2),t.Q6J("ngIf",s.logoUrl)}}function H(e,c){1&e&&t._UZ(0,"span",7)}let j=(()=>{class e{constructor(){this.clubApi=(0,t.f3M)(Z),this.logoUrl="",this.showFallbackIcon=!1}ngOnChanges(s){s.club?.currentValue&&this.termNum&&(this.logoUrl=this.clubApi.buildLogoUrl(this.termNum,this.club.id))}onImageLoadError(){this.showFallbackIcon=!0}static#t=this.\u0275fac=function(l){return new(l||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["tr","sm-club-item",""]],inputs:{club:"club",termNum:"termNum"},features:[t.TTD],attrs:J,decls:15,vars:7,consts:[[1,"flex","items-center","space-x-3"],["class","avatar",4,"ngIf","ngIfElse"],["clubIcon",""],[1,"avatar"],[1,"mask","w-12","h-12","bg-white","px-2","py-2"],["alt","Logo klubu","fill","",3,"ngSrc","error",4,"ngIf"],["alt","Logo klubu","fill","",3,"ngSrc","error"],["smIcon","users",1,"w-12","h-12","flex","items-center","justify-center"]],template:function(l,r){if(1&l&&(t.TgZ(0,"td")(1,"div",0),t.YNc(2,D,3,1,"div",1),t.qZA()(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.YNc(13,H,1,0,"ng-template",null,2,t.W1O)),2&l){const P=t.MAs(14);t.xp6(2),t.Q6J("ngIf",!r.showFallbackIcon)("ngIfElse",P),t.xp6(2),t.Oqu(r.club.name),t.xp6(2),t.Oqu(r.club.phone),t.xp6(2),t.Oqu(r.club.email),t.xp6(2),t.Oqu(r.club.fax),t.xp6(2),t.Oqu(r.club.membersCount)}},dependencies:[u.O5,E.r,u.Zd],changeDetection:0})}return e})();function w(e,c){if(1&e&&(t._UZ(0,"tr",2),t.ALo(1,"async")),2&e){const s=c.$implicit,l=t.oxw();t.Q6J("club",s)("termNum",t.lcZ(1,2,l.termNum$))}}const B=function(){return[]};let K=(()=>{class e{constructor(){this.store=(0,t.f3M)(n.yh),this.allClubs$=this.store.select(L),this.termNum$=this.store.select(N)}static#t=this.\u0275fac=function(l){return new(l||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["sm-club-list"]],decls:17,vars:4,consts:[[1,"table","table-xs","table-pin-rows","relative","max-h-full","w-full"],["sm-club-item","",3,"club","termNum",4,"ngFor","ngForOf"],["sm-club-item","",3,"club","termNum"]],template:function(l,r){1&l&&(t.TgZ(0,"table",0)(1,"thead")(2,"tr"),t._UZ(3,"th"),t.TgZ(4,"th"),t._uU(5,"Nazwa"),t.qZA(),t.TgZ(6,"th"),t._uU(7,"Telefon"),t.qZA(),t.TgZ(8,"th"),t._uU(9,"Email"),t.qZA(),t.TgZ(10,"th"),t._uU(11,"Fax"),t.qZA(),t.TgZ(12,"th"),t._uU(13,"Cz\u0142onkowie"),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,w,2,4,"tr",1),t.ALo(16,"async"),t.qZA()()),2&l&&(t.xp6(15),t.Q6J("ngForOf",t.lcZ(16,1,r.allClubs$)||t.DdM(3,B)))},dependencies:[u.sg,j,u.Ov],changeDetection:0})}return e})();var Q=o(9026),A=o(9788),W=o(3751),d=o(95);const X=function(){return[]};let Y=(()=>{class e{constructor(){this.store=(0,t.f3M)(n.yh),this.terms$=this.store.select(A.PB),this.selectedTerm$=this.store.select(y),this.compareTerms=Q.H}onTermSelect(s){this.store.dispatch(p({term:s}))}static#t=this.\u0275fac=function(l){return new(l||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["sm-club-filters"]],decls:4,vars:8,consts:[[1,"flex","gap-3"],["label","Wybierz kadencje sejmu","labelProperty","label",3,"items","ngModel","compareWithFn","ngModelChange"]],template:function(l,r){1&l&&(t.TgZ(0,"div",0)(1,"sm-item-select",1),t.NdJ("ngModelChange",function(rt){return r.onTermSelect(rt)}),t.ALo(2,"async"),t.ALo(3,"async"),t.qZA()()),2&l&&(t.xp6(1),t.Q6J("items",t.lcZ(2,3,r.terms$)||t.DdM(7,X))("ngModel",t.lcZ(3,5,r.selectedTerm$))("compareWithFn",r.compareTerms))},dependencies:[W.p,d.JJ,d.On,u.Ov],changeDetection:0})}return e})(),q=(()=>{class e{static#t=this.\u0275fac=function(l){return new(l||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["sm-club-list-page"]],decls:3,vars:0,consts:[[1,"px-4","py-4"]],template:function(l,r){1&l&&(t.TgZ(0,"main",0),t._UZ(1,"sm-club-filters")(2,"sm-club-list"),t.qZA())},dependencies:[K,Y],changeDetection:0})}return e})(),G=(()=>{class e{static#t=this.\u0275fac=function(l){return new(l||e)};static#e=this.\u0275cmp=t.Xpm({type:e,selectors:[["sm-club-details-page"]],decls:2,vars:0,template:function(l,r){1&l&&(t.TgZ(0,"p"),t._uU(1,"club-details-page works!"),t.qZA())},changeDetection:0})}return e})();var V=o(1374),F=o(7398),k=o(6503);const _=[{path:"",component:S,resolve:{filters:e=>{const c=(0,t.f3M)(n.yh);return c.select(A.PB).pipe((0,V.P)(),(0,F.U)(s=>{c.dispatch(f({term:(0,k.w)(s,e.queryParams)}))}))}},children:[{path:"",component:q},{path:":id",component:G}]}];let tt=(()=>{class e{static#t=this.\u0275fac=function(l){return new(l||e)};static#e=this.\u0275mod=t.oAB({type:e});static#s=this.\u0275inj=t.cJS({imports:[a.Bz.forChild(_),a.Bz]})}return e})();var i=o(8131),et=o(1631),st=o(6306),U=o(7634),g=o(2096),M=o(6232);let lt=(()=>{class e{constructor(){this.router=(0,t.f3M)(a.F0),this.actions$=(0,t.f3M)(i.eX),this.clubApi=(0,t.f3M)(Z),this.activatedRoute=(0,t.f3M)(a.gz),this.loadClubs$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(h),(0,et.z)(({termNum:s})=>this.clubApi.fetchList(s).pipe((0,F.U)(l=>C({clubs:l})),(0,st.K)(l=>(0,g.of)(v({error:l}))))))),this.termFilterUpdate$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(p),(0,U.z)(({term:s})=>s?(this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{term:s.num},queryParamsHandling:"merge"}),(0,g.of)(h({termNum:s.num}))):M.E))),this.selectedTermInitialize$=(0,i.GW)(()=>this.actions$.pipe((0,i.l4)(f),(0,U.z)(({term:s})=>s?(0,g.of)(h({termNum:s.num})):M.E)))}static#t=this.\u0275fac=function(l){return new(l||e)};static#e=this.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac})}return e})();var nt=o(6208);let ot=(()=>{class e{static#t=this.\u0275fac=function(l){return new(l||e)};static#e=this.\u0275mod=t.oAB({type:e});static#s=this.\u0275inj=t.cJS({imports:[u.ez,nt.m,d.u5,tt,n.Aw.forFeature(T,I),i.sQ.forFeature([lt])]})}return e})()}}]);