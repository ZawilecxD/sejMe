<div
  class="flex items-baseline justify-between border-b border-gray-200 pb-6 pt-24 w-full">
  <h1 class="text-4xl font-bold tracking-tight">Posłowie</h1>
  <div class="flex items-center">
    <button
      type="button"
      class="-m-2 ml-4 p-2 text-gray-400 hover:text-gray-500 sm:ml-6 lg:hidden"
      (click)="toggleFiltersSection()">
      <span class="sr-only">Filtry</span>
      <svg
        class="h-5 w-5"
        aria-hidden="true"
        viewBox="0 0 20 20"
        fill="currentColor">
        <path
          fill-rule="evenodd"
          d="M2.628 1.601C5.028 1.206 7.49 1 10 1s4.973.206 7.372.601a.75.75 0 01.628.74v2.288a2.25 2.25 0 01-.659 1.59l-4.682 4.683a2.25 2.25 0 00-.659 1.59v3.037c0 .684-.31 1.33-.844 1.757l-1.937 1.55A.75.75 0 018 18.25v-5.757a2.25 2.25 0 00-.659-1.591L2.659 6.22A2.25 2.25 0 012 4.629V2.34a.75.75 0 01.628-.74z"
          clip-rule="evenodd"></path>
      </svg>
    </button>
  </div>
</div>

<div class="drawer drawer-end z-50">
  <input
    id="member-filters-drawer"
    type="checkbox"
    class="drawer-toggle"
    [checked]="showFilters" />
  <div class="drawer-side">
    <label
      aria-label="close sidebar"
      class="drawer-overlay"
      (click)="toggleFiltersSection()"></label>
    <div class="min-h-full flex flex-col gap-4">
      <div class="w-[25rem] min-h-full bg-base-200 text-base-content">
        <!-- Sidebar content here -->
        <div class="flex items-center justify-between p-4">
          <h2 class="text-lg font-medium">Filtruj</h2>
          <button
            type="button"
            class="-mr-2 flex h-10 w-10 items-center justify-center rounded-md p-2"
            (click)="toggleFiltersSection()">
            <span class="sr-only">Zamknij filtry</span>
            <svg
              class="h-6 w-6"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              aria-hidden="true">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M6 18L18 6M6 6l12 12"></path>
            </svg>
          </button>
        </div>
        <div class="py-6 px-4 border-t border-gray-200 flex flex-col gap-4">
          <sm-item-select
            classes="w-full"
            label="Kadencja sejmu"
            [items]="(terms$ | async) || []"
            [ngModel]="selectedTerm$ | async"
            (ngModelChange)="onTermSelect($event)"
            labelProperty="label"
            [compareWithFn]="compareTerms" />

          <div class="form-control w-full">
            <label class="label-text label" for="member-search">
              Imię lub Nazwisko
            </label>
            <input
              id="member-search"
              type="text"
              placeholder="Imię lub naziwsko"
              class="input input-bordered w-full"
              [ngModel]="searchValue$ | async"
              (ngModelChange)="updateMembersSearchValue($event)" />
          </div>

          @if (availableBirthLocations$ | async; as birthLocations) {
            <!--            <sm-item-multi-select-->
            <!--              label="Miejsce narodzin"-->
            <!--              classes="w-full"-->
            <!--              [items]="birthLocations"-->
            <!--              [ngModel]="selectedBirthLocations$ | async"-->
            <!--              (ngModelChange)="updateSelectedBirthLocations($event)" />-->
            <sm-checkbox-group
              label="Miejsce narodzin"
              [options]="birthLocations"
              [ngModel]="selectedBirthLocations$ | async"
              (ngModelChange)="updateSelectedBirthLocations($event)" />
          }

          @if (availableClubs$ | async; as clubs) {
            <sm-item-multi-select
              label="Klub"
              classes="w-full"
              [items]="clubs"
              [ngModel]="selectedClubs$ | async"
              (ngModelChange)="updateSelectedClubs($event)" />
          }

          @if (availableDistricts$ | async; as districts) {
            <sm-item-multi-select
              label="Region"
              classes="w-full"
              [items]="districts"
              [ngModel]="selectedDistrictsNames$ | async"
              (ngModelChange)="updateSelectedDistrictsNames($event)" />
          }
          @if (availableEductionLevels$ | async; as eduLevels) {
            <sm-item-multi-select
              label="Wykształcenie"
              classes="w-full"
              [items]="eduLevels"
              [ngModel]="selectedEducationLevels$ | async"
              (ngModelChange)="updateSelectedEducationLevels($event)" />
          }
          @if (availableProfessions$ | async; as professions) {
            <sm-item-multi-select
              label="Zawód"
              classes="w-full"
              [items]="professions"
              [ngModel]="selectedProfessions$ | async"
              (ngModelChange)="updateSelectedProfessions($event)" />
          }
          @if (availableVoivodeships$ | async; as voivodeships) {
            <sm-item-multi-select
              label="Województwo"
              classes="w-full"
              [items]="voivodeships"
              [ngModel]="selectedVoivodeships$ | async"
              (ngModelChange)="updateSelectedVoivodeships($event)" />
          }
        </div>
      </div>
    </div>
  </div>
</div>
